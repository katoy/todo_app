<!DOCTYPE html>
<html>
<head>
    <title>Todo App</title>
    <link rel="shortcut icon" href="#">
    <select id="language-select" name="lang">
        <option value="en" {% if lang == 'en' %}selected{% endif %}>English</option>
        <option value="ja" {% if lang == 'ja' %}selected{% endif %}>日本語</option>
        <option value="zh" {% if lang == 'zh' %}selected{% endif %}>中文</option>
    </select>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>{{ translations['title'] if translations and translations.get('title') else 'Todo List' }}</h1>
    <p style="color: red;">{{ translations.get('errorMessage') if translations and error else error if error else '' }}</p>
    <ul id="todo-list">
        {% for todo in todos %}
            <li class="todo-item {{ 'completed' if todo.completed else 'pending' }}">
                <input type="checkbox" data-task="{{ todo.task }}" {{ 'checked' if todo.completed else '' }}>
                <span class="task-name">{{ todo.task }}</span>
            </li>
        {% endfor %}
    </ul>
    <form method="post" action="/add">
        <input type="hidden" name="lang" value="{{ lang }}">
        <input type="text" name="todo" placeholder="{{ translations['enterTodo'] if translations and translations.get('enterTodo') else 'Enter todo' }}">
        <button type="submit">{{ translations['addTodo'] if translations and translations.get('addTodo') else 'Add Todo' }}</button>
    </form>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
